<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="eea.notifications"
  metal:use-macro="context/main_template/macros/master">
  <body>
    <div metal:fill-slot="content-core">
      <div class="user-preferences-container"
           tal:define="notifications_catalog python:view.notifications_catalog;
                       user_id python: view.user_id;
                       tags python:notifications_catalog.all_tags();
                       selected_tags python:notifications_catalog.selected_tags(user_id);
                       events python:notifications_catalog.all_events();
                       selected_events python:notifications_catalog.selected_events(user_id);">

        <style>@import url("./eea-notifications-styles.css/");</style>

        <h2>Manage subscriptions</h2>
        <form method="post" id="subscriptions-form">
          <div class="form-group tags-list-container">
            <label for="tags-list"><h3>1. Select the content tags you are interested in:</h3></label>

            <ul class="tags-list">
              <tal:options tal:repeat="tag python:tags">
                <tal:option tal:define="is_selected python:tag[0] in selected_tags">
                  <li>
                    <input type="checkbox" name="tags-list"
                           tal:attributes="id python:tag[0];
                                           value python:tag[1];
                                           checked python:is_selected"/>
                    <label tal:attributes="for python:tag[0]"
                           tal:content="python:tag[1]">Education</label>
                  </li>
                </tal:option>
              </tal:options>
            </ul>

            <p class="form-help">
              <b>Example:</b> if you want to be notified when an item related to education is changed
               you will subscribe to "education" tag.
            </p>
          </div>

          <div class="form-group events-list-container">
            <label for="events-list"><h3>2. Select the type of events you want to be notified about:</label>

            <ul class="events-list">
              <tal:options tal:repeat="tag python:events">
                <tal:option tal:define="is_selected python:tag[1] in selected_events">
                  <li>
                    <input type="checkbox" name="events-list"
                           tal:attributes="id python:tag[0];
                                           value python:tag[1];
                                           checked python:is_selected"/>
                    <label tal:attributes="for python:tag[0]"
                           tal:content="python:tag[1]">Education</label>
                  </li>
                </tal:option>
              </tal:options>
            </ul>

            <p class="form-help">
              <b>Example:</b> the item was deleted. You will receive a notification
                  when an item (tagged with a tag you are interested in) is deleted.
            </p>
          </div>
          <button name="submit" type="submit" class="btn btn-default">
            Subscribe
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
